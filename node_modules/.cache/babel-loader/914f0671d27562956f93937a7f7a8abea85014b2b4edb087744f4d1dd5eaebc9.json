{"ast":null,"code":"import _regeneratorRuntime from\"/home/workspace/reactjs/coding-practices/nxtWatchApp/node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/workspace/reactjs/coding-practices/nxtWatchApp/node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/workspace/reactjs/coding-practices/nxtWatchApp/node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from'react';import Loader from'react-loader-spinner';import Header from'../Header';import Categories from'../Categories';import CurrentDishesList from'../CurrentDishesList';import MyContext from'../../context/MyContext';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var apiStatus={success:'SUCCESS',failure:'FAILURE',loader:'LOADER'};var RestoApp=function RestoApp(){var _useContext=useContext(MyContext),updateRestaurantName=_useContext.updateRestaurantName,updateRestaurantData=_useContext.updateRestaurantData;var _useState=useState(apiStatus.loader),_useState2=_slicedToArray(_useState,2),currentApiStatus=_useState2[0],setCurrentApiStatus=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,responseData,restaurantName,tableMenuList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url='https://apis2.ccbp.in/restaurant-app/restaurant-menu-list-details';_context.prev=1;_context.next=4;return fetch(url);case 4:response=_context.sent;if(!response.ok){_context.next=17;break;}_context.next=8;return response.json();case 8:responseData=_context.sent;restaurantName=responseData[0].restaurant_name;updateRestaurantName(restaurantName);tableMenuList=responseData[0].table_menu_list;tableMenuList=tableMenuList.map(function(eachItem){return{categoryDishes:eachItem.category_dishes.map(function(eachDish){return{addonCat:eachDish.addonCat,dishAvailability:eachDish.dish_Availability,dishType:eachDish.dish_Type,dishCalories:eachDish.dish_calories,dishCurrency:eachDish.dish_currency,dishDescription:eachDish.dish_description,dishId:eachDish.dish_id,dishImage:eachDish.dish_image,dishName:eachDish.dish_name,dishPrice:eachDish.dish_price,nexturl:eachDish.nexturl,quantity:0// Initialize quantity to 0\n};}),menuCategory:eachItem.menu_category,menuCategoryId:eachItem.menu_category_id,menuCategoryImage:eachItem.menu_category_image,nexturl:eachItem.nexturl};});updateRestaurantData(tableMenuList);setCurrentApiStatus(apiStatus.success);_context.next=19;break;case 17:console.error('Failed to fetch data',response);setCurrentApiStatus(apiStatus.failure);case 19:_context.next=25;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](1);console.error('Error fetching data',_context.t0);setCurrentApiStatus(apiStatus.failure);case 25:case\"end\":return _context.stop();}},_callee,null,[[1,21]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);// Empty dependency array to ensure it runs only once when the component mounts\nvar renderSuccessView=function renderSuccessView(){return/*#__PURE__*/_jsxs(\"div\",{className:\"resto-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Categories,{}),/*#__PURE__*/_jsx(CurrentDishesList,{})]});};var onClickRetry=function onClickRetry(){setCurrentApiStatus(apiStatus.loader);};var renderFailureView=function renderFailureView(){return/*#__PURE__*/_jsxs(\"div\",{className:\"common-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"not-found-heading\",children:\"Not Found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClickRetry,type:\"button\",className:\"retry-button\",children:\"Retry\"})]});};var renderApiStatus=function renderApiStatus(){if(currentApiStatus===apiStatus.success){return renderSuccessView();}return renderFailureView();};var renderLoader=function renderLoader(){return/*#__PURE__*/_jsx(\"div\",{className:\"common-container\",children:/*#__PURE__*/_jsx(Loader,{type:\"ThreeDots\",height:80,width:80,color:\"black\"})});};return/*#__PURE__*/_jsx(\"div\",{children:currentApiStatus===apiStatus.loader?renderLoader():renderApiStatus()});};export default RestoApp;","map":{"version":3,"names":["useState","useEffect","useContext","Loader","Header","Categories","CurrentDishesList","MyContext","jsx","_jsx","jsxs","_jsxs","apiStatus","success","failure","loader","RestoApp","_useContext","updateRestaurantName","updateRestaurantData","_useState","_useState2","_slicedToArray","currentApiStatus","setCurrentApiStatus","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","responseData","restaurantName","tableMenuList","wrap","_callee$","_context","prev","next","fetch","sent","ok","json","restaurant_name","table_menu_list","map","eachItem","categoryDishes","category_dishes","eachDish","addonCat","dishAvailability","dish_Availability","dishType","dish_Type","dishCalories","dish_calories","dishCurrency","dish_currency","dishDescription","dish_description","dishId","dish_id","dishImage","dish_image","dishName","dish_name","dishPrice","dish_price","nexturl","quantity","menuCategory","menu_category","menuCategoryId","menu_category_id","menuCategoryImage","menu_category_image","console","error","t0","stop","apply","arguments","renderSuccessView","className","children","onClickRetry","renderFailureView","onClick","type","renderApiStatus","renderLoader","height","width","color"],"sources":["/home/workspace/reactjs/coding-practices/nxtWatchApp/src/components/RestoApp/index.js"],"sourcesContent":["import {useState, useEffect, useContext} from 'react'\nimport Loader from 'react-loader-spinner'\nimport Header from '../Header'\nimport Categories from '../Categories'\nimport CurrentDishesList from '../CurrentDishesList'\nimport MyContext from '../../context/MyContext'\nimport './index.css'\n\nconst apiStatus = {\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  loader: 'LOADER',\n}\n\nconst RestoApp = () => {\n  const {updateRestaurantName, updateRestaurantData} = useContext(MyContext)\n  const [currentApiStatus, setCurrentApiStatus] = useState(apiStatus.loader)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const url =\n        'https://apis2.ccbp.in/restaurant-app/restaurant-menu-list-details'\n\n      try {\n        const response = await fetch(url)\n        if (response.ok) {\n          const responseData = await response.json()\n          const restaurantName = responseData[0].restaurant_name\n          updateRestaurantName(restaurantName)\n          let tableMenuList = responseData[0].table_menu_list\n          tableMenuList = tableMenuList.map(eachItem => ({\n            categoryDishes: eachItem.category_dishes.map(eachDish => ({\n              addonCat: eachDish.addonCat,\n              dishAvailability: eachDish.dish_Availability,\n              dishType: eachDish.dish_Type,\n              dishCalories: eachDish.dish_calories,\n              dishCurrency: eachDish.dish_currency,\n              dishDescription: eachDish.dish_description,\n              dishId: eachDish.dish_id,\n              dishImage: eachDish.dish_image,\n              dishName: eachDish.dish_name,\n              dishPrice: eachDish.dish_price,\n              nexturl: eachDish.nexturl,\n              quantity: 0, // Initialize quantity to 0\n            })),\n            menuCategory: eachItem.menu_category,\n            menuCategoryId: eachItem.menu_category_id,\n            menuCategoryImage: eachItem.menu_category_image,\n            nexturl: eachItem.nexturl,\n          }))\n          updateRestaurantData(tableMenuList)\n          setCurrentApiStatus(apiStatus.success)\n        } else {\n          console.error('Failed to fetch data', response)\n          setCurrentApiStatus(apiStatus.failure)\n        }\n      } catch (error) {\n        console.error('Error fetching data', error)\n        setCurrentApiStatus(apiStatus.failure)\n      }\n    }\n\n    fetchData()\n  }, []) // Empty dependency array to ensure it runs only once when the component mounts\n\n  const renderSuccessView = () => (\n    <div className=\"resto-container\">\n      <Header />\n      <Categories />\n      <CurrentDishesList />\n    </div>\n  )\n\n  const onClickRetry = () => {\n    setCurrentApiStatus(apiStatus.loader)\n  }\n\n  const renderFailureView = () => (\n    <div className=\"common-container\">\n      <p className=\"not-found-heading\">Not Found</p>\n      <button onClick={onClickRetry} type=\"button\" className=\"retry-button\">\n        Retry\n      </button>\n    </div>\n  )\n\n  const renderApiStatus = () => {\n    if (currentApiStatus === apiStatus.success) {\n      return renderSuccessView()\n    }\n\n    return renderFailureView()\n  }\n\n  const renderLoader = () => (\n    <div className=\"common-container\">\n      <Loader type=\"ThreeDots\" height={80} width={80} color=\"black\" />\n    </div>\n  )\n\n  return (\n    <div>\n      {currentApiStatus === apiStatus.loader\n        ? renderLoader()\n        : renderApiStatus()}\n    </div>\n  )\n}\n\nexport default RestoApp\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}